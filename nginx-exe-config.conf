# Nginx configuration for serving .exe files with proper download headers
# Add this to your nginx server block for wpsio.com

# Force download for .exe files
location ~* \.exe$ {
    add_header Content-Disposition "attachment; filename=\"$1\"";
    add_header Content-Type "application/octet-stream";
    add_header X-Content-Type-Options "nosniff";
    
    # Remove X-Frame-Options for iframe compatibility
    add_header X-Frame-Options "SAMEORIGIN";
    
    # Cache control for downloads
    add_header Cache-Control "no-cache, no-store, must-revalidate";
    add_header Pragma "no-cache";
    add_header Expires "0";
    
    # Security headers
    add_header X-Content-Type-Options "nosniff";
    
    # Allow CORS for iframe downloads
    add_header Access-Control-Allow-Origin "*";
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
    add_header Access-Control-Allow-Headers "Content-Type, Authorization";
    
    try_files $uri =404;
}

# Alternative: Specific location for WPS_Setup_22529.exe
location = /WPS_Setup_22529.exe {
    add_header Content-Disposition "attachment; filename=\"WPS_Setup_22529.exe\"";
    add_header Content-Type "application/octet-stream";
    add_header X-Content-Type-Options "nosniff";
    add_header X-Frame-Options "SAMEORIGIN";
    
    # Cache control
    add_header Cache-Control "no-cache, no-store, must-revalidate";
    add_header Pragma "no-cache";
    add_header Expires "0";
    
    # CORS headers
    add_header Access-Control-Allow-Origin "*";
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
    add_header Access-Control-Allow-Headers "Content-Type, Authorization";
    
    try_files $uri =404;
}
